"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[848],{9848:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{color:"#666","font-size":"40px"}},[e("b",[t._v("欢迎进入培训教育后台管理系统！ "),"ROLE_ADMIN"===t.user.role?e("span",{staticStyle:{color:"#3a8ee6","text-decoration":"none"}},[t._v(t._s(t.user.name))]):t._e(),"ROLE_STUDENT"===t.user.role?e("span",{staticStyle:{color:"#3a8ee6","text-decoration":"none"}},[t._v(t._s(t.user.name))]):t._e(),"ROLE_TEACHER"===t.user.role?e("span",{staticStyle:{color:"#3a8ee6","text-decoration":"none"}},[t._v(t._s(t.user.name))]):t._e(),"ROLE_MANAGER"===t.user.role?e("el-badge",{staticClass:"item",staticStyle:{"margin-top":"-7px"},attrs:{value:t.isDelete}},[e("router-link",{staticStyle:{color:"#3a8ee6","text-decoration":"none"},attrs:{to:"/student"}},[t._v(t._s(t.user.name))])],1):t._e()],1)]),t._m(0),e("div",{staticStyle:{margin:"10px 0px"}},[e("el-row",{attrs:{gutter:40}},t._l(t.files,(function(s){return e("el-col",{key:s.id,staticStyle:{"margin-bottom":"10px"},attrs:{span:6}},[e("el-card",{staticStyle:{border:"1px solid #ccc","padding-bottom":"10px"}},[e("img",{staticStyle:{width:"250px",height:"250px"},attrs:{src:s.coverUrl,alt:""}}),e("b",{staticStyle:{color:"#666","font-size":"20px"}},[t._v(t._s(s.name))]),e("div",[t._v("培训价格："+t._s(s.price)+"元")]),e("div",[t._v("培训时长："+t._s(s.period))]),e("div",[t._v("开始时间："+t._s(s.beginTime))]),e("div",[t._v("内容介绍："+t._s(s.introduce))]),e("div",[t._v("参加人数："+t._s(s.trainNumber)+"人")]),e("el-button",{staticClass:"enroll",attrs:{type:"success"},on:{click:function(e){return t.save(s.id)}}},[t._v("我要报名"),e("i",{staticClass:"el-icon-thumb",staticStyle:{"margin-left":"3px"}})])],1)],1)})),1)],1),e("el-dialog",{attrs:{visible:t.dialog1,title:"评价界面",width:"35%"},on:{"update:visible":function(e){t.dialog1=e}}},[e("h2",{staticStyle:{margin:"-30px 0 10px 0","text-align":"center"}},[t._v("计划评价")]),e("el-form",{ref:"userForm",attrs:{"label-width":"90px",size:"small",model:t.form}},[e("el-form-item",{attrs:{label:"计划名称:",prop:"name"}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.form.name))])]),e("el-form-item",{attrs:{label:"计划打分:"}},[e("el-rate",{attrs:{colors:t.colors,texts:t.texts,"show-text":""},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1),e("el-form-item",{attrs:{label:"评价话语："}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"30","show-word-limit":""},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialog1=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.savePlan}},[t._v("确 定")])],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{color:"#666","font-size":"30px","margin-top":"20px"}},[e("b",[t._v("培训计划展示")])])}],r=(s(7658),{name:"Home",data(){return{user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},files:[],msg:[],isDelete:0,isScore:0,status:2,dialog1:!1,form:{},colors:["#99A9BF","#F7BA2A","#FF9900"],texts:["1分","2分","3分","4分","5分好评"],tableData:[],courses:[]}},created(){this.load()},mounted(){document.addEventListener("mouseup",(t=>{let e=document.getElementById("messageTrack1");e&&e.contains(t.target)&&this.toMy1()})),document.addEventListener("mouseup",(t=>{let e=document.getElementById("messageTrack2");e&&e.contains(t.target)&&this.toMy2()}))},methods:{async load(){this.request.get("/plan").then((t=>{this.files=t.data})),this.request.get("/order/isDelete").then((t=>{this.isDelete=t.data,this.isDelete>0&&"ROLE_MANAGER"===this.user.role&&this.open()})),await this.getIsScore(),await this.getStatus(),this.$forceUpdate()},getIsScore(){this.request.get("/stuCourse/isScore/"+this.user.id).then((t=>{console.log("=========="+t.data),this.isScore=t.data}))},getStatus(){this.request.get("/order/status/"+this.user.id).then((t=>{this.status=t.data,"ROLE_STUDENT"===this.user.role&&0==this.status.status&&0==this.status.isComment&&(this.open1(),this.form.name=this.status.name,this.form.planId=this.status.id,this.form.studentId=this.user.id,this.isScore>0&&(this.open2(),console.log("********"+this.isScore)))}))},save(t){this.$confirm("请注意时间信息，确认选择该计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((()=>{this.request.post("/plan/studentPlan/"+t+"/"+this.user.id).then((t=>{"200"===t.code?(this.$message.success("加入成功"),this.load()):this.$message.error(t.msg)}))}))},savePlan(){this.request.post("/planComment/planScore",this.form).then((t=>{"200"===t.code?(this.$message.success("评价成功"),this.dialog1=!1,this.isComment()):this.$message.error(t.msg)}))},isComment(){this.request.get("/order/isComment/"+this.user.id)},open(){const t=this.$createElement;this.$notify({title:"有新学生参与培训计划",message:t("i",{style:"color: teal"},"请尽快分配课程,或查看是否有学生还未分配课程"),type:"success"})},open1(){this.$createElement;this.$notify({title:"你有参与的计划已结束",message:'点击为计划评分 <span style="font-style: normal;color: #17e1e1;text-decoration: underline;cursor: pointer;" id="messageTrack1">我要评分</span>',type:"success",duration:8e3,dangerouslyUseHTMLString:!0})},toMy1(){this.dialog1=!0},open2(){this.$createElement;this.$notify({title:"你有参与的课程已结束",message:'点击为课程评分 <span style="font-style: normal;color: #67C23A;text-decoration: underline;cursor: pointer;" id="messageTrack2">我要评分</span>',type:"success",offset:80,duration:8e3,dangerouslyUseHTMLString:!0})},toMy2(){this.$router.push({path:"/score"})}}}),a=r,n=s(1001),l=(0,n.Z)(a,o,i,!1,null,null,null),c=l.exports}}]);
//# sourceMappingURL=848.6d150867.js.map